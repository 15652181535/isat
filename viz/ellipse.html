<!DOCTYPE html>
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="ellipse.js"></script>
  </head>
  <body>
    <h1>Ellipse testing</h1>
    <p>Hopefully, the X and Y portions of the calculated X,Y,Z
      coordinates for a satellite will describe an ellipse. In ECI
      Geodetic coords, Z is aligned with North pole, which the
      satellites nominally orbit around.  Draw some points and see if
      they look fine. Earth coordinates don't enter into the equation
      yet.</p>
    <p>For extra credit, draw short vectors indicating direction of travel.</p>
    <p>For more extra credit, pull values from HTML INPUT text areas</p>

    <p>The following satellite calculations (time, x, y, z, vx, vy, vz, ...) is from:
      <pre>
octave:1> testmat
input opsmode afspc a, improved i i
input type of run c, v, m: c
input constants 721, 72, 84 72
input elset filename: ONE.TLE 
      </pre>
      with the output grabbed from file tmatall.out.</p>

    <textarea id="satcalcs" rows="10" cols="186">
 25544 xx
       0.00000000    3639.15675015    2164.36759595    5288.12567790 -3.298895550  6.903779640 -0.553581387
       2.00000000    3211.05874781    2970.38987477    5173.16198569 -3.825137200  6.509320511 -1.359548347    6776.260578 0.000442   51.62523  292.24221   45.85865   57.22772   57.18513
       4.00000000    2723.93683962    3721.81191931    4962.83477304 -4.281121329  5.995158027 -2.140541371    6777.168059 0.000625   51.62826  292.22953   50.67396   60.20572   60.14356
       6.00000000    2186.73780337    4404.81139109    4661.00793728 -4.658473439  5.370677774 -2.882203072    6778.404228 0.000804   51.63239  292.21811   59.20624   59.46545   59.38610
       8.00000000    1609.32959502    5006.81555445    4273.22903967 -4.950239371  4.647292825 -3.570871926    6779.878228 0.000969   51.63731  292.20826   69.10083   57.36122   57.26770
      10.00000000    1002.32271954    5516.73340784    3806.63077305 -5.151018246  3.838251417 -4.193831761    6781.481701 0.001113   51.64267  292.20021   79.44457   54.80588   54.70170
      12.00000000     376.87703645    5925.16258946    3269.80308942 -5.257071547  2.958408716 -4.739550356    6783.096754 0.001227   51.64806  292.19403   89.80521   52.23148   52.12042
      14.00000000    -255.50291238    6224.56679194    2672.63757767 -5.266404567  2.023963759 -5.197902176    6784.604645 0.001303   51.65310  292.18968   99.94084   49.87983   49.76573
      16.00000000    -883.18050303    6409.41963863    2026.14633744 -5.178816388  1.052164196 -5.560369452    6785.894549 0.001335   51.65741  292.18695  109.68417   47.91817   47.80475
      18.00000000   -1494.60356629    6476.31140137    1342.25832610 -4.995914962  0.060983351 -5.820215369    6786.871749 0.001316   51.66067  292.18553  118.87731   46.50446   46.39510
      20.00000000   -2078.52050551    6424.01560346     633.59690366 -4.721094747 -0.931223945 -5.972623264    6787.464637 0.001246   51.66266  292.18504  127.31119   45.84787   45.74550
      22.00000000   -2624.19141400    6253.51344526     -86.75700543 -4.359475717 -1.906078437 -6.014796463    6787.629983 0.001124   51.66321  292.18498  134.63127   46.30315   46.21008
      24.00000000   -3121.58956522    5967.97507318    -805.51114630 -3.917804202 -2.845536848 -5.946014688    6787.356087 0.000956   51.66231  292.18486  140.13003   48.57804   48.49592
      26.00000000   -3561.58881275    5572.69791613   -1509.41219591 -3.404317811 -3.732245308 -5.767644742    6786.663558 0.000755   51.66000  292.18418  142.18832   54.29196   54.22176
      28.00000000   -3936.13281141    5075.00354800   -2185.49453647 -2.828578375 -4.549875625 -5.483105241    6785.603700 0.000548   51.65646  292.18248  136.64369   67.60763   67.54963
      30.00000000   -4238.38253246    4484.09570490   -2821.32212219 -2.201278274 -5.283435155 -5.097787234    6784.254618 0.000406   51.65196  292.17938  114.69506   97.32641   97.28029
      32.00000000   -4462.83925057    3810.88310301   -3405.21835892 -1.534026430 -5.919542609 -4.618934461    6782.715384 0.000447   51.64681  292.17460   82.91174  136.87924  136.84418
      34.00000000   -4605.44096637    3067.77149771   -3926.47945540 -0.839120692 -6.446664230 -4.055488455    6781.098692 0.000639   51.64140  292.16799   67.63735  159.92273  159.89756
      36.00000000   -4663.63102841    2268.42995504   -4375.56738784 -0.129313132 -6.855307059 -3.417904619    6779.522597 0.000870   51.63613  292.15951   64.93826  170.39068  170.37403
      38.00000000   -4636.39846734    1427.53656561   -4744.27937568  0.582425853 -7.138168238 -2.717945682    6778.101910 0.001086   51.63137  292.14929   67.50038  175.59734  175.58777
      40.00000000   -4524.29019969     560.50884321   -5025.89152208  1.283139823 -7.290241155 -1.968458641    6776.939915 0.001263   51.62747  292.13757   72.36436  178.50213  178.49835
      42.00000000   -4329.39576620    -316.77613056   -5215.27496242  1.960111324 -7.308880572 -1.183140489    6776.120949 0.001385   51.62473  292.12469   78.30489  180.33046  180.33138
      44.00000000   -4055.30562979   -1188.26705414   -5308.98343932  2.601077252 -7.193829502 -0.376296943    6775.704387 0.001444   51.62333  292.11109   84.71265  181.69166  181.69655
      46.00000000   -3707.04428539   -2038.02482528   -5305.31165933  3.194433128 -6.947210633  0.437402802    6775.720422 0.001435   51.62339  292.09725   91.19853  182.97486  182.98340
      48.00000000   -3290.97956294   -2850.50591475   -5204.32408796  3.729425486 -6.573484484  1.243173263    6776.167918 0.001359   51.62489  292.08369   97.41380  184.52879  184.54110
      50.00000000   -2814.70958257   -3610.83879073   -5007.85403480  4.196331804 -6.079375583  2.026360495    6777.014489 0.001221   51.62773  292.07088  102.90721  186.80471  186.82131
      52.00000000   -2286.92890196   -4305.08958214   -4719.47301898  4.586627152 -5.473766908  2.772689445    6778.198779 0.001032   51.63170  292.05926  106.89684  190.58458  190.60632
      54.00000000   -1717.27552691   -4920.51314271   -4344.43054650  4.893136170 -4.767561963  3.468509464    6779.634829 0.000811   51.63651  292.04916  107.71903  197.53209  197.56011
      56.00000000   -1116.16067305   -5445.78556745   -3889.56463551  5.110168134 -3.973513360  4.101035869    6781.218196 0.000590   51.64181  292.04082  101.35588  211.66525  211.70075
      58.00000000    -494.58348534   -5871.21407901   -3363.18374039  5.233632061 -3.106016918  4.658584377    6782.833464 0.000442   51.64721  292.03435   80.14646  240.64510  240.68929
      60.00000000     136.06666536   -6188.92011782   -2774.92117901  5.261128055 -2.180871011  5.130794067    6784.362582 0.000475   51.65232  292.02970   50.51230  278.05026  278.10413
      62.00000000     764.21721054   -6392.99151548   -2135.56375970  5.192010750 -1.215002268  5.508833420    6785.693478 0.000652   51.65677  292.02672   35.66579  300.66857  300.73278
      64.00000000    1378.32514343   -6479.59987212   -1456.85700976  5.027420793 -0.226160597  5.785583221    6786.728302 0.000864   51.66022  292.02511   33.11755  310.98961  311.06434
      66.00000000    1967.09146046   -6447.07973818    -751.29017433  4.770280898  0.767411436  5.955789845    6787.390684 0.001061   51.66243  292.02449   36.19437  315.68685  315.77170
      68.00000000    2519.67288478   -6295.96693421     -31.86491680  4.425254147  1.747327729  6.016182772    6787.631467 0.001218   51.66322  292.02440   41.99747  317.65930  317.75324
      70.00000000    3025.88627854   -6028.99430471     688.14766618  3.998663726  2.695417418  5.965551154    6787.432438 0.001325   51.66255  292.02433   49.31867  318.11538  318.21669
      72.00000000    3476.40115654   -5651.04434213    1395.45657038  3.498375059  3.594083260  5.804775800    6786.807782 0.001378   51.66046  292.02378   57.59336  317.61989  317.72623
      74.00000000    3862.91593684   -5169.05935349    2077.00148186  2.933643119  4.426649145  5.536814855    6785.803099 0.001376   51.65711  292.02228   66.52065  316.47389  316.58237
      76.00000000    4178.31399613   -4591.91108160    2720.19889814  2.314929342  5.177686672  5.166643589    6784.492080 0.001322   51.65273  292.01944   75.90994  314.86804  314.97533
      78.00000000    4416.79620919   -3930.23283908    3313.17839434  1.653693854  5.833311874  4.701150759    6782.971065 0.001223   51.64765  292.01494   85.60285  312.96076  313.06325
      80.00000000    4573.98738835   -3196.21818264    3845.00405777  0.962169474  6.381444961  4.148995787    6781.351913 0.001086   51.64225  292.00862   95.41235  310.93900  311.03299
      82.00000000    4647.01483750   -2403.39088605    4305.87670245  0.253124216  6.812028134  3.520432269    6779.753719 0.000921   51.63691  292.00042  105.03922  309.10185  309.18375
      84.00000000    4634.55802605   -1566.35143431    4687.31318444 -0.460381384  7.117198726  2.827104025    6778.294017 0.000737   51.63204  291.99045  113.89255  308.03996  308.10650
      86.00000000    4536.86911189    -700.50546380    4982.29989715 -1.165236500  7.291417036  2.081819979    6777.080111 0.000545   51.62798  291.97891  120.56966  309.15572  309.20412
      88.00000000    4355.76465359     178.22044851    5185.41826194 -1.848517286  7.331549771  1.298313672    6776.201191 0.000358   51.62504  291.96616  120.90410  316.61519  316.64336
      90.00000000    4094.58932875    1053.67042546    5292.94068473 -2.497715766  7.236911054  0.490992404    6775.721798 0.000218   51.62344  291.95261  100.70780  344.60602  344.61265
      92.00000000    3758.15282082    1909.75340500    5302.89599018 -3.100957948  7.009263313 -0.325320056    6775.677104 0.000239   51.62329  291.93876   59.12248   33.98604   33.97071
      94.00000000    3352.64127548    2730.73505014    5215.10376114 -3.647209474  6.652780130 -1.135644161    6776.070351 0.000392   51.62461  291.92511   45.95497   54.94793   54.91112
      96.00000000    2885.50490249    3501.52299486    5031.17732403 -4.126467457  6.173972555 -1.925106385    6776.872617 0.000574   51.62729  291.91215   48.78188   59.91463   59.85771
      98.00000000    2365.32345802    4207.94109999    4754.49537117 -4.529937105  5.581579567 -2.679200084    6778.024940 0.000755   51.63114  291.90034   56.61785   59.87109   59.79625
     100.00000000    1801.65153423    4836.98843310    4390.14245480 -4.850191278  4.886422734 -3.384043215    6779.442627 0.000925   51.63587  291.89003   66.25383   58.02596   57.93605
     102.00000000    1204.84584015    5377.07866240    3944.81888094 -5.081310522  4.101224792 -4.026630112    6781.021466 0.001076   51.64115  291.88146   76.52588   55.54290   55.44131
     104.00000000     585.87699771    5818.25552230    3426.72092023 -5.219000414  3.240392052 -4.595073600    6782.645379 0.001199   51.64657  291.87475   86.90978   52.94588   52.83633
     106.00000000     -43.87120920    6152.38003797    2845.39276154 -5.260682563  2.319761416 -5.078832726    6784.194967 0.001286   51.65174  291.86990   97.12574   50.51455   50.40089
     108.00000000    -672.81173603    6373.28536239    2211.55226116 -5.205555379  1.356314097 -5.468920531    6785.556326 0.001331   51.65629  291.86674  106.99304   48.42957   48.31556
     110.00000000   -1289.36947716    6476.89544121    1536.89325512 -5.054621003  0.367860013 -5.758085673    6786.629456 0.001327   51.65988  291.86500  116.35672   46.84594   46.73509
     112.00000000   -1882.19751650    6461.30431515     833.86795259 -4.810675509 -0.627301262 -5.940961736    6787.335662 0.001271   51.66224  291.86429  125.02904   45.95151   45.84688
     114.00000000   -2440.38990753    6326.81370040     115.45364434 -4.478260751 -1.610735161 -6.014178568    6787.623351 0.001163   51.66321  291.86416  132.70969   46.04674   45.95083
     116.00000000   -2953.68635551    6075.92752290    -605.09142886 -4.063577760 -2.564233116 -5.976431167    6787.471804 0.001007   51.66271  291.86411  138.82341   47.70712   47.62179
     118.00000000   -3412.66427240    5713.30326092   -1314.47776515 -3.574363400 -3.470169672 -5.828503284    6786.892643 0.000813   51.66078  291.86363  142.10281   52.20031   52.12669
     120.00000000   -3808.91398422    5245.66118763   -1999.63434760 -3.019733697 -4.311845444 -5.573244929    6785.928871 0.000603   51.65756  291.86226  139.37104   62.70343   62.64200
     122.00000000   -4135.19337711    4681.65380583   -2647.95297686 -2.409998803 -5.073806266 -5.215505047    6784.651598 0.000432   51.65330  291.85959  122.90041   86.94444   86.89504
     124.00000000   -4385.55893238    4031.69883847   -3247.52199313 -1.756455617 -5.742130371 -4.762022607    6783.154706 0.000415   51.64830  291.85530   90.71909  126.89542  126.85736
     126.00000000   -4555.47086620    3307.78000596   -3787.34467782 -1.071164701 -6.304677342 -4.221280966    6781.547881 0.000578   51.64292  291.84921   70.17848  155.20524  155.17743
     128.00000000   -4641.87088894    2523.22043206   -4257.53827496 -0.366718086 -6.751294905 -3.603331424    6779.948538 0.000806   51.63757  291.84125   64.95500  168.19763  168.17873
     130.00000000   -4643.23186689    1692.43385857   -4649.51031516  0.343995926 -7.073981854 -2.919592384    6778.473258 0.001029   51.63263  291.83150   66.46765  174.45377  174.44237
     132.00000000   -4559.57934645     830.65892957   -4956.10968822  1.048025798 -7.267007418 -2.182630343    6777.229351 0.001219   51.62846  291.82016   70.85349  177.83671  177.83143
     134.00000000   -4392.48544975     -46.31832423   -5171.75062441  1.732583692 -7.326988891 -1.405928288    6776.307134 0.001357   51.62537  291.80757   76.56909  179.88994  179.88964
     136.00000000   -4145.03605319    -922.44894329   -5292.50835516  2.385263499 -7.252930153 -0.603646027    6775.773487 0.001434   51.62358  291.79412   82.88953  181.33843  181.34228
     138.00000000   -3821.77242393   -1781.70791640   -5316.18570032  2.994248313 -7.046223930  0.209624180    6775.667086 0.001445   51.62322  291.78030   89.38680  182.61021  182.61776
     140.00000000   -3428.60864310   -2608.37927523   -5242.35016662  3.548506389 -6.710620195  1.019104426    6775.995662 0.001387   51.62433  291.76661   95.71465  184.05153  184.06277
     142.00000000   -2972.72623301   -3387.33544605   -5072.34136252  4.037974990 -6.252162267  1.810078908    6776.735443 0.001265   51.62681  291.75355  101.46709  186.06839  186.08373
     144.00000000   -2462.44748095   -4104.30702548   -4809.24868316  4.453731400 -5.679091134  2.568141537    6777.832837 0.001090   51.63049  291.74155  105.98930  189.31564  189.33586
     146.00000000   -1907.08906473   -4746.13915098   -4457.85935359  4.788149922 -5.001717572  3.279442138    6779.208227 0.000875   51.63510  291.73100  107.95705  195.11753  195.14369
     148.00000000   -1316.79777560   -5301.03054386   -4024.57709937  5.035042861 -4.232261017  3.930929387    6780.761643 0.000649   51.64030  291.72215  104.24511  206.59938  206.63270
     150.00000000    -702.37042249   -5758.75116629   -3517.31199412  5.189782673 -3.384654082  4.510587632    6782.379926 0.000470   51.64571  291.71515   87.88439  230.73040  230.77208
     152.00000000     -75.06039003   -6110.83432599   -2945.34244652  5.249401670 -2.474312147  5.007663578    6783.944895 0.000446   51.65094  291.71000   57.89574  268.48988  268.54100
     154.00000000     553.62621337   -6350.73906163   -2319.15084471  5.212665193 -1.517868682  5.412877670    6785.341944 0.000595   51.65561  291.70658   38.19609  295.96110  296.02241
     156.00000000    1172.14138310   -6473.97881970   -1650.23505310  5.080114089 -0.532878678  5.718614133    6786.468453 0.000805   51.65937  291.70462   33.07419  308.85550  308.92733
     158.00000000    1769.10911244   -6478.21284161    -950.89871320  4.854072803  0.462505380  5.919083203    6787.241382 0.001009   51.66194  291.70377   34.98421  314.71917  314.80130
     160.00000000    2333.53805376   -6363.29734001    -234.02407069  4.538620339  1.449878452  6.010449240    6787.603480 0.001179   51.66315  291.70358   40.18763  317.29088  317.38244
     162.00000000    2855.02840029   -6131.29444456     487.16823670  4.139522783  2.410940378  5.990919212    6787.527618 0.001301   51.66289  291.70355   47.15615  318.09914  318.19862
     164.00000000    3323.96838280   -5786.43799438    1199.36741600  3.664127781  3.327856017  5.860787433    6787.018899 0.001369   51.66119  291.70319   55.19974  317.83421  317.93944
     166.00000000    3731.71593063   -5335.05647385    1889.42337904  3.121223197  4.183607657  5.622434264    6786.114361 0.001382   51.65816  291.70200   63.96455  316.85010  316.95832
     168.00000000    4070.76141516   -4785.45463901    2544.59467385  2.520863879  4.962329397  5.280278595    6784.880290 0.001342   51.65404  291.69956   73.23863  315.35886  315.46685
     170.00000000    4334.86795297   -4147.75656662    3152.78803644  1.874171889  5.649614166  4.840686013    6783.407338 0.001255   51.64913  291.69556   82.86060  313.52192  313.62614
     172.00000000    4519.18644812   -3433.71388786    3702.78445271  1.193116449  6.232785665  4.311836445    6781.803813 0.001128   51.64377  291.68976   92.65787  311.51183  311.60857
     174.00000000    4620.34333640   -2656.48377557    4184.44716182  0.490280287  6.701129609  3.703556489    6780.187663 0.000970   51.63838  291.68208  102.37416  309.58474  309.67037
     176.00000000    4636.49979112   -1830.38179801    4588.90771501 -0.221381147  7.046080885  3.027122509    6778.677750 0.000790   51.63333  291.67259  111.52933  308.22057  308.29171
     178.00000000    4567.38189656    -970.61502920    4908.72695582 -0.928781752  7.261365407  2.295040831    6777.385084 0.000599   51.62902  291.66146  119.04320  308.49921  308.55293
     180.00000000    4414.28194046     -93.00084567    5138.02853675 -1.618943300  7.343097157  1.520811009    6776.404659 0.000408   51.62574  291.64901  121.91853  313.41755  313.45155
     182.00000000    4180.03149346     786.32330265    5272.60327007 -2.279226654  7.289832155  0.718677430    6775.808478 0.000247   51.62375  291.63563  109.85034  333.28016  333.29290
     184.00000000    3868.94732486    1651.19410770    5309.98318532 -2.897553027  7.102581589 -0.096626522    6775.640299 0.000214   51.62319  291.62181   68.84025   22.08496   22.07575
     186.00000000    3486.75147097    2485.71584330    5249.48461662 -3.462613415  6.784786310 -0.910138467    6775.912430 0.000345   51.62410  291.60806   47.17353   51.54621   51.51529
     188.00000000    3040.46696136    3274.54850845    5092.21998112 -3.964064795  6.342254370 -1.706928727    6776.604846 0.000523   51.62641  291.59486   47.24862   59.26500   59.21351
</textarea>
      
    <h2>Canvas:</h2>
    <canvas id="canvas" width="480" height="640" > </canvas>
  </body>
</html>

